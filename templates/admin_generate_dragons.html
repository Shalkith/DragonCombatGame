{% include "admin_base.html" %}



<h2>Generate NPC Dragons</h2>

<div style="margin-bottom: 12px;">
    <label for="quantity">Quantity:</label>
    <input type="number" id="quantity" value="1" min="1" style="width:60px;">
    <button id="generate-btn">Generate Dragons</button>
    <span id="gen-result" style="margin-left:10px; color:#ff4747;"></span>
</div>

<div id="generated-dragons"></div>

<script>
document.getElementById('generate-btn').addEventListener('click', async () => {
    const qty = document.getElementById('quantity').value || 1;
    const resultSpan = document.getElementById('gen-result');
    const dragonsDiv = document.getElementById('generated-dragons');
    resultSpan.innerText = 'Generating...';
    dragonsDiv.innerHTML = '';
    try {
        const res = await fetch(`/makenpcdragon/${qty}`);
        const data = await res.json();
        if (data.error) {
            resultSpan.innerText = data.error;
        } else {
            resultSpan.innerText = `Generated ${data.dragons.length} dragons!`;
            // Show a simple list of generated dragon names
            const list = document.createElement('ul');
            data.dragons.forEach(d => {
                const li = document.createElement('li');
                li.textContent = `${d.name} (${d.breed}, Age ${d.age})`;
                list.appendChild(li);
            });
            dragonsDiv.appendChild(list);
        }
    } catch (err) {
        resultSpan.innerText = 'Error: ' + err;
    }
});
</script>
